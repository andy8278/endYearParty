window.__require=function t(e,n,o){function i(c,a){if(!n[c]){if(!e[c]){var p=c.split("/");if(p=p[p.length-1],!e[p]){var l="function"==typeof __require&&__require;if(!a&&l)return l(p,!0);if(r)return r(p,!0);throw new Error("Cannot find module '"+c+"'")}c=p}var s=n[c]={exports:{}};e[c][0].call(s.exports,function(t){return i(e[c][1][t]||t)},s,s.exports,t,e,n,o)}return n[c].exports}for(var r="function"==typeof __require&&__require,c=0;c<o.length;c++)i(o[c]);return i}({GameController:[function(t,e,n){"use strict";cc._RF.push(e,"893df5TNyBKjZnv1GGZSX9c","GameController");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,c=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(c=(r<3?i(c):r>3?i(e,n,c):i(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(n,"__esModule",{value:!0});var c=t("./GameEvent"),a=cc._decorator,p=a.ccclass,l=a.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.congratulationNode=null,e._prizeNumArr=[1,1,2,3,5,8,1],e._curIndex=-1,e}return i(e,t),e.prototype.onLoad=function(){cc.director.on(c.GameEvent.PrizeBtn.Click,this._onSelectPrize,this),cc.director.on(c.GameEvent.MainSceneView.SpinBtnClick,this._onSpinBtnClick,this),cc.director.on(c.GameEvent.MainSceneView.RespinBtnClick,this._onRespinBtnClick,this),cc.director.on(c.GameEvent.Reel.Stop,this._onStop,this)},e.prototype._onSelectPrize=function(t){cc.director.emit(c.GameEvent.GameController.SelectPrize,this._curIndex,t),this._curIndex=t},e.prototype._onSpinBtnClick=function(){this._prizeNumArr[this._curIndex]--,cc.director.emit(c.GameEvent.GameController.StartSpin,this._curIndex,this._prizeNumArr[this._curIndex])},e.prototype._onRespinBtnClick=function(){cc.director.emit(c.GameEvent.GameController.StartRespin)},e.prototype._onStop=function(){this._prizeNumArr[this._curIndex]>0&&cc.director.emit(c.GameEvent.GameController.CanSpin)},r([l(cc.Node)],e.prototype,"congratulationNode",void 0),r([p],e)}(cc.Component);n.default=s,cc._RF.pop()},{"./GameEvent":"GameEvent"}],GameEvent:[function(t,e,n){"use strict";cc._RF.push(e,"d24058DAKlDKpfBO5hH9dsd","GameEvent"),Object.defineProperty(n,"__esModule",{value:!0}),n.GameEvent=void 0,n.GameEvent={MainSceneView:{SpinBtnClick:"GameEvent.MainSceneView.SpinBtnClick",RespinBtnClick:"GameEvent.MainSceneView.RespinBtnClick"},Reel:{Stop:"GameEvent.Reel.Stop"},PrizeBtn:{Click:"GameEvent.PrizeBtn.Click"},GameController:{SelectPrize:"GameEvent.GameController.SelectPrize",StartSpin:"GameEvent.GameController.StartSpin",StartRespin:"GameEvent.GameController.StartRespin",CanSpin:"GameEvent.GameController.CanSpin"}},cc._RF.pop()},{}],MainSceneView:[function(t,e,n){"use strict";cc._RF.push(e,"f57a2DKom5M04Lk9LTl3Q7q","MainSceneView");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,c=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(c=(r<3?i(c):r>3?i(e,n,c):i(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(n,"__esModule",{value:!0});var c,a,p=t("./GameEvent"),l=t("./Reel"),s=cc._decorator,u=s.ccclass,f=s.property;(function(t){t.ReelWin="ReelWin",t.ReelNormal="ReelNormal"})(c||(c={})),function(t){t.HeadBoardIdle="HeadBoardIdle",t.HeadBoardWin="HeadBoardWin"}(a||(a={}));var h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.defaultSetJson=null,e.realSetJson=null,e.reelCut=[],e.headBoardAnim=null,e.winItems=[],e.reelNode=null,e.spinButton=null,e.respinButton=null,e.spinBarAnim=null,e.winEffect=[],e.titleSprite=[],e.titleNode=null,e._reelView=null,e._reelAnim=null,e}return i(e,t),e.prototype.onLoad=function(){this._reelView=this.reelNode.getComponent(l.default),this._reelAnim=this.reelNode.getComponent(cc.Animation),this.spinButton.node.on("click",this._onSpinClick,this),this.respinButton.node.on("click",this._onReSpinClick,this),cc.director.on(p.GameEvent.GameController.CanSpin,this._onCanSpin,this),cc.director.on(p.GameEvent.Reel.Stop,this._onReelStop,this),cc.director.on(p.GameEvent.PrizeBtn.Click,this._onPrizeBtnClick,this);var t=this.defaultSetJson.json,e=this.realSetJson.json;this._reelView.init(t,e),this._onInit()},e.prototype._onInit=function(){this.respinButton.interactable=!1,this.spinButton.interactable=!1,this.reelCut[0].active=!0},e.prototype._onCanSpin=function(){this.spinButton.interactable=!0},e.prototype._onSpinClick=function(){cc.director.emit(p.GameEvent.MainSceneView.SpinBtnClick),this.spinButton.interactable=!1,this.respinButton.interactable=!1,this._reelView.doSpin(),this._reelAnim.play(c.ReelNormal),this.spinBarAnim.play(),this.headBoardAnim.play(a.HeadBoardIdle),this.winEffect.forEach(function(t){t.active=!1})},e.prototype._onReSpinClick=function(){cc.director.emit(p.GameEvent.MainSceneView.RespinBtnClick),this.respinButton.interactable=!1,this._reelView.doSpin(),this._reelAnim.play(c.ReelNormal),this.spinBarAnim.play(),this.headBoardAnim.play(a.HeadBoardIdle),this.winEffect.forEach(function(t){t.active=!1})},e.prototype._onReelStop=function(){this.respinButton.interactable=!0,this._reelAnim.play(c.ReelWin),this.headBoardAnim.play(a.HeadBoardWin),this.winEffect.forEach(function(t){t.active=!0})},e.prototype._onPrizeBtnClick=function(t){this.titleNode.getComponent(cc.Sprite).spriteFrame=this.titleSprite[t],this.spinButton.interactable=!0,this.respinButton.interactable=!0,this.reelCut[0].active=!1},r([f(cc.JsonAsset)],e.prototype,"defaultSetJson",void 0),r([f(cc.JsonAsset)],e.prototype,"realSetJson",void 0),r([f([cc.Node])],e.prototype,"reelCut",void 0),r([f(cc.Animation)],e.prototype,"headBoardAnim",void 0),r([f([cc.Node])],e.prototype,"winItems",void 0),r([f(cc.Node)],e.prototype,"reelNode",void 0),r([f(cc.Button)],e.prototype,"spinButton",void 0),r([f(cc.Button)],e.prototype,"respinButton",void 0),r([f(cc.Animation)],e.prototype,"spinBarAnim",void 0),r([f([cc.Node])],e.prototype,"winEffect",void 0),r([f([cc.SpriteFrame])],e.prototype,"titleSprite",void 0),r([f(cc.Node)],e.prototype,"titleNode",void 0),r([u],e)}(cc.Component);n.default=h,cc._RF.pop()},{"./GameEvent":"GameEvent","./Reel":"Reel"}],PrizeBtn:[function(t,e,n){"use strict";cc._RF.push(e,"9e3aeIzH5BBnpRL3TjVAGRi","PrizeBtn");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,c=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(c=(r<3?i(c):r>3?i(e,n,c):i(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(n,"__esModule",{value:!0});var c=cc._decorator,a=c.ccclass,p=c.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.cancelLine=null,e.selectFrame=null,e.curNumber=null,e}return i(e,t),e.prototype.setNumber=function(t){this.curNumber.string=0==t?"":t.toString()},e.prototype.onFinish=function(){this.cancelLine.active=!0},e.prototype.onSelect=function(){this.selectFrame.active=!0},r([p(cc.Node)],e.prototype,"cancelLine",void 0),r([p(cc.Node)],e.prototype,"selectFrame",void 0),r([p(cc.Label)],e.prototype,"curNumber",void 0),r([a],e)}(cc.Component);n.default=l,cc._RF.pop()},{}],PrizeView:[function(t,e,n){"use strict";cc._RF.push(e,"37240/lGlpIppnOw4g/ilCm","PrizeView");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,c=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(c=(r<3?i(c):r>3?i(e,n,c):i(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(n,"__esModule",{value:!0});var c=t("./GameEvent"),a=t("./PrizeBtn"),p=cc._decorator,l=p.ccclass,s=p.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.prizeBtns=[],e._finishPrize=[],e}return i(e,t),e.prototype.onLoad=function(){var t=this;this.prizeBtns.forEach(function(e,n){e.node.on("click",function(){t.prizeBtns.forEach(function(t,e){t.node.getComponent(a.default).selectFrame.active=e==n}),cc.director.emit(c.GameEvent.PrizeBtn.Click,n)},t)}),cc.director.on(c.GameEvent.GameController.StartSpin,this._onStartSpin,this),cc.director.on(c.GameEvent.GameController.StartRespin,this._onRespin,this),cc.director.on(c.GameEvent.Reel.Stop,this._onReelStop,this)},e.prototype._onStartSpin=function(t,e){this.prizeBtns.forEach(function(t){t.interactable=!1}),0==e&&(this.prizeBtns[t].node.getComponent(a.default).onFinish(),this._finishPrize.push(t)),this.prizeBtns[t].getComponent(a.default).setNumber(e)},e.prototype._onRespin=function(){this.prizeBtns.forEach(function(t){t.interactable=!1})},e.prototype._onReelStop=function(){var t=this;this.prizeBtns.forEach(function(e,n){t._finishPrize.includes(n)||(e.interactable=!0)})},r([s([cc.Button])],e.prototype,"prizeBtns",void 0),r([l],e)}(cc.Component);n.default=u,cc._RF.pop()},{"./GameEvent":"GameEvent","./PrizeBtn":"PrizeBtn"}],Reel:[function(t,e,n){"use strict";cc._RF.push(e,"a6f4ax2UkdI25iCthjZwA/C","Reel");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,c=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(c=(r<3?i(c):r>3?i(e,n,c):i(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(n,"__esModule",{value:!0});var c,a=t("./GameEvent"),p=t("./SymbolInfo"),l=cc._decorator,s=l.ccclass,u=l.property;(function(t){t[t.Stop=0]="Stop",t[t.rolling=1]="rolling"})(c||(c={}));var f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.items=[],e.anticipationNode=null,e.height=0,e.reelState=c.Stop,e.runTime=0,e.runEndTime=10,e.moveLen=0,e.prevMove=0,e.moveSymbol=0,e._defaultSet=null,e._realSetArr=null,e}return i(e,t),e.prototype._resetItemPos=function(){for(var t=0,e=this.items.length-1;e>=0;e--)this.items[e].y=t,t+=this.height},e.prototype._moving=function(t){for(var e=this._moveDown(t),n=0;n<this.items.length;n++)this.items[n].y-=e;for(n=0;n<this.items.length;n++){var o=this.items[n];if(o.y<-1*this.height){this.moveSymbol+=1;var i=n==this.items.length-1?0:n+1;if(o.y=this.items[i].y+this.height,87==this.moveSymbol){var r=Math.floor(Math.random()*this._realSetArr.length);this.items[i].getComponent(p.default).setInfo(this._realSetArr[r].UName,this._realSetArr[r].UDepartment),cc.tween(this.anticipationNode).to(.5,{opacity:0}).start()}else this._setRandomItem(this.items[n].getComponent(p.default))}}},e.prototype._moveDown=function(t){this.runTime+=t;var e=this.runTime/this.runEndTime,n=(e=(e-=1)*e*e+1)*this.moveLen,o=n-this.prevMove;return this.prevMove=n,this.runTime>=this.runEndTime&&(this.reelState=c.Stop,cc.director.emit(a.GameEvent.Reel.Stop)),o},e.prototype._setRandomItem=function(t){var e=Math.floor(Math.random()*this._defaultSet.UNames.length),n=Math.floor(Math.random()*this._defaultSet.UDepartments.length);t.setInfo(this._defaultSet.UNames[e],this._defaultSet.UDepartments[n])},e.prototype.doSpin=function(){this._resetItemPos(),this.moveSymbol=0,this._setRandomItem(this.items[0].getComponent(p.default)),this._setRandomItem(this.items[2].getComponent(p.default)),cc.tween(this.anticipationNode).to(.5,{opacity:255}).start(),this.runTime=0,this.moveLen=88*this.height,this.prevMove=0,this.reelState=c.rolling},e.prototype.start=function(){this.height=415},e.prototype.update=function(t){this.reelState==c.rolling&&this._moving(t)},e.prototype.init=function(t,e){this._defaultSet=t,this._realSetArr=e},r([u([cc.Node])],e.prototype,"items",void 0),r([u(cc.Node)],e.prototype,"anticipationNode",void 0),r([s],e)}(cc.Component);n.default=f,cc._RF.pop()},{"./GameEvent":"GameEvent","./SymbolInfo":"SymbolInfo"}],SymbolInfo:[function(t,e,n){"use strict";cc._RF.push(e,"6dacf7Fl4dK3JmUzlsOqFab","SymbolInfo");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,c=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(c=(r<3?i(c):r>3?i(e,n,c):i(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(n,"__esModule",{value:!0});var c=cc._decorator,a=c.ccclass,p=c.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.nameLabel=null,e.departmentLabel=null,e}return i(e,t),e.prototype.setInfo=function(t,e){this.nameLabel.string=t,this.departmentLabel.string=e},r([p(cc.Label)],e.prototype,"nameLabel",void 0),r([p(cc.Label)],e.prototype,"departmentLabel",void 0),r([a],e)}(cc.Component);n.default=l,cc._RF.pop()},{}]},{},["GameController","GameEvent","MainSceneView","PrizeBtn","PrizeView","Reel","SymbolInfo"]);